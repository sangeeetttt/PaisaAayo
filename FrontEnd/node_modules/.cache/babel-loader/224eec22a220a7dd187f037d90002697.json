{"ast":null,"code":"import _slicedToArray from\"S:\\\\PaisaAayo\\\\PaisaAayo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,Fragment}from\"react\";import{Link,useLocation}from\"react-router-dom\";import Transactioncard from\"./../components/transactions/transactioncard\";import{getTransactionByFilter}from\"./../firebase/transaction\";import Spinner from\"react-bootstrap/Spinner\";import Empty from\"./../components/general/empty.component\";import{getCurrentUser}from\"./../firebase/user\";import fire from\"./../firebase/fire\";var labels={ALL:\"All\",INC:\"Incomes\",EXP:\"Expenses\"};export default function TransactionsV(){var _useState=useState(\"ALL\"),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setfilter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),TransactionsArr=_useState4[0],setTransactionsArr=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setloading=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setuser=_useState8[1];var loc=useLocation();var getDataFromFB=function getDataFromFB(){//    console.log(filter);\n// console.log(TransactionsArr);\nvar uid=user.uid;setloading(true);getTransactionByFilter(uid,filter,function(res){var Arr=[];res.forEach(function(item){Arr.push(item.data());});setTransactionsArr(Arr);setloading(false);},function(err){return console.log(err);});};useEffect(function(){setloading(true);fire.auth().onAuthStateChanged(function(user){if(user){setuser(user);getTransactionByFilter(user.uid,\"ALL\",function(res){var Arr=[];res.forEach(function(item){Arr.push(item.data());});setTransactionsArr(Arr);setloading(false);},function(err){return console.log(err);});}else{//console.log(\"NO user AUth Change\");\n}});},[loc.pathname]);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{marginBottom:\"7px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-sm-6 col-md-6\"},/*#__PURE__*/React.createElement(\"select\",{className:\"custom-select w-100\",value:filter,onChange:function onChange(e){return setfilter(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:\"ALL\"},\"All\"),/*#__PURE__*/React.createElement(\"option\",{value:\"INC\"},\"Income\"),/*#__PURE__*/React.createElement(\"option\",{value:\"EXP\"},\"Expenses\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-sm-6 col-md-6 d-flex flex-row\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-info mx-1\",onClick:getDataFromFB},\"Apply\"),/*#__PURE__*/React.createElement(Link,{to:\"/addtransaction\",className:\"btn btn-success mx-1\"},\"New\",/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus mx-1\"})))),!loading?TransactionsArr.length>0?TransactionsArr.map(function(trans,index){return/*#__PURE__*/React.createElement(Transactioncard,{key:index,trans:trans});}):/*#__PURE__*/React.createElement(Empty,null):/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",role:\"status\",style:{width:\"70px\",height:\"70px\",margin:\"auto\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"))));}","map":{"version":3,"sources":["S:/PaisaAayo/PaisaAayo/src/pages/transactions.page.jsx"],"names":["React","useState","useEffect","Fragment","Link","useLocation","Transactioncard","getTransactionByFilter","Spinner","Empty","getCurrentUser","fire","labels","ALL","INC","EXP","TransactionsV","filter","setfilter","TransactionsArr","setTransactionsArr","loading","setloading","user","setuser","loc","getDataFromFB","uid","res","Arr","forEach","item","push","data","err","console","log","auth","onAuthStateChanged","pathname","marginBottom","e","target","value","length","map","trans","index","width","height","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport Transactioncard from \"./../components/transactions/transactioncard\";\nimport { getTransactionByFilter } from \"./../firebase/transaction\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport Empty from \"./../components/general/empty.component\";\n\nimport { getCurrentUser } from \"./../firebase/user\";\nimport fire from \"./../firebase/fire\";\nconst labels = {\n  ALL: \"All\",\n  INC: \"Incomes\",\n  EXP: \"Expenses\",\n};\n\nexport default function TransactionsV() {\n  const [filter, setfilter] = useState(\"ALL\");\n  const [TransactionsArr, setTransactionsArr] = useState([]);\n  const [loading, setloading] = useState(true);\n  const [user, setuser] = useState({});\n  let loc = useLocation();\n\n  const getDataFromFB = () => {\n    //    console.log(filter);\n    // console.log(TransactionsArr);\n    let uid = user.uid;\n    setloading(true);\n    getTransactionByFilter(\n      uid,\n      filter,\n      (res) => {\n        let Arr = [];\n        res.forEach((item) => {\n          Arr.push(item.data());\n        });\n        setTransactionsArr(Arr);\n        setloading(false);\n      },\n      (err) => console.log(err)\n    );\n  };\n\n  useEffect(() => {\n    setloading(true);\n    fire.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        setuser(user);\n        getTransactionByFilter(\n          user.uid,\n          \"ALL\",\n          (res) => {\n            let Arr = [];\n            res.forEach((item) => {\n              Arr.push(item.data());\n            });\n            setTransactionsArr(Arr);\n            setloading(false);\n          },\n          (err) => console.log(err)\n        );\n      } else {\n        //console.log(\"NO user AUth Change\");\n      }\n    });\n  }, [loc.pathname]);\n\n  return (\n    <Fragment>\n      <div className='row' style={{ marginBottom: \"7px\" }}>\n        <div className='col-6 col-sm-6 col-md-6'>\n          <select\n            className='custom-select w-100'\n            value={filter}\n            onChange={(e) => setfilter(e.target.value)}>\n            <option value='ALL'>All</option>\n            <option value='INC'>Income</option>\n            <option value='EXP'>Expenses</option>\n          </select>\n        </div>\n        <div className='col-6 col-sm-6 col-md-6 d-flex flex-row'>\n          <button className='btn btn-outline-info mx-1' onClick={getDataFromFB}>\n            Apply\n          </button>\n          <Link to='/addtransaction' className='btn btn-success mx-1'>\n            New\n            <i className='fa fa-plus mx-1'></i>\n          </Link>\n        </div>\n      </div>\n      {!loading ? (\n        TransactionsArr.length > 0 ? (\n          TransactionsArr.map((trans, index) => (\n            <Transactioncard key={index} trans={trans} />\n          ))\n        ) : (\n          <Empty />\n        )\n      ) : (\n        <div className='w-100 d-flex justify-content-center'>\n          <Spinner\n            animation='border'\n            role='status'\n            style={{ width: \"70px\", height: \"70px\", margin: \"auto\" }}>\n            <span className='sr-only'>Loading...</span>\n          </Spinner>\n        </div>\n      )}\n    </Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}