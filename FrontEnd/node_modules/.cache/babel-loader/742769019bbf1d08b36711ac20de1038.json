{"ast":null,"code":"import _defineProperty from\"S:\\\\PaisaAayo\\\\PaisaAayo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"S:\\\\PaisaAayo\\\\PaisaAayo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"S:\\\\PaisaAayo\\\\PaisaAayo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,Fragment}from\"react\";import categories from\"./../../data/categories\";import fire from\"../../firebase/fire\";import{addTrans}from\"../../firebase/transaction\";export default function Addtransaction(){var _useState=useState({type:\"EXP\",amount:0,category:0,date:new Date(),desc:\"\"}),_useState2=_slicedToArray(_useState,2),trans=_useState2[0],settrans=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setsuccess=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],seterror=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),errorBody=_useState8[0],seterrorBody=_useState8[1];var handleChange=function handleChange(e){settrans(_objectSpread(_objectSpread({},trans),{},_defineProperty({},e.target.name,e.target.value)));//console.log(user);\n};var sucessAlert=function sucessAlert(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},\"Transaction Added Successfully !\");};var errorAlert=function errorAlert(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},errorBody.message?errorBody.message:\"Something Went Wrong Please Try Again !\");};var onsubmit=function onsubmit(){var user=fire.auth().currentUser;if(trans.amount<=0){seterror(true);seterrorBody({message:\"Amount Cannot be Negative or Zero\"});}else{addTrans(user.uid,trans,function(res){console.log(res);setsuccess(true);settrans({type:\"\",amount:0,category:0,date:new Date(),desc:\"\"});},function(err){console.log(err);seterrorBody(err);seterror(true);});}};//To Stop displaying the popup after 3 sec\nuseEffect(function(){if(error){setTimeout(function(){seterror(false);},3000);}},[error]);//To Stop displaying the popup after 3 sec\nuseEffect(function(){if(success){setTimeout(function(){setsuccess(false);},3000);}},[success]);return/*#__PURE__*/React.createElement(Fragment,null,success&&sucessAlert(),error&&errorAlert(),/*#__PURE__*/React.createElement(\"div\",{className:\"card p-2 m-auto\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Add a Transaction\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control m-2\",name:\"type\",value:trans.type,onChange:handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"INC\"},\"Income\"),/*#__PURE__*/React.createElement(\"option\",{value:\"EXP\"},\"Expense\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"ex. 50\",min:\"1\",max:\"100000\",name:\"amount\",value:trans.amount,onChange:handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Category\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",name:\"category\",value:trans.category,onChange:handleChange},categories.map(function(cat,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:index},cat.title);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Date\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"date\",name:\"date\",value:trans.date,onChange:handleChange,className:\"form-control\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Description\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"desc\",value:trans.desc,onChange:handleChange,placeholder:\"ex.KFC Bill\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:onsubmit},\"Add Transaction\"))));}","map":{"version":3,"sources":["S:/PaisaAayo/PaisaAayo/src/components/transactions/addtransaction.jsx"],"names":["React","useState","useEffect","Fragment","categories","fire","addTrans","Addtransaction","type","amount","category","date","Date","desc","trans","settrans","success","setsuccess","error","seterror","errorBody","seterrorBody","handleChange","e","target","name","value","sucessAlert","errorAlert","message","onsubmit","user","auth","currentUser","uid","res","console","log","err","setTimeout","map","cat","index","title"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport categories from \"./../../data/categories\";\nimport fire from \"../../firebase/fire\";\nimport { addTrans } from \"../../firebase/transaction\";\n\nexport default function Addtransaction() {\n  const [trans, settrans] = useState({\n    type: \"EXP\",\n    amount: 0,\n    category: 0,\n    date: new Date(),\n    desc: \"\",\n  });\n  const [success, setsuccess] = useState(false);\n  const [error, seterror] = useState(false);\n  const [errorBody, seterrorBody] = useState({});\n\n  const handleChange = (e) => {\n    settrans({ ...trans, [e.target.name]: e.target.value });\n    //console.log(user);\n  };\n  const sucessAlert = () => (\n    <div className='alert alert-success'>Transaction Added Successfully !</div>\n  );\n\n  const errorAlert = () => (\n    <div className='alert alert-danger'>\n      {errorBody.message\n        ? errorBody.message\n        : \"Something Went Wrong Please Try Again !\"}\n    </div>\n  );\n\n  const onsubmit = () => {\n    let user = fire.auth().currentUser;\n    if (trans.amount <= 0) {\n      seterror(true);\n      seterrorBody({ message: \"Amount Cannot be Negative or Zero\" });\n    } else {\n      addTrans(\n        user.uid,\n        trans,\n        (res) => {\n          console.log(res);\n          setsuccess(true);\n          settrans({\n            type: \"\",\n            amount: 0,\n            category: 0,\n            date: new Date(),\n            desc: \"\",\n          });\n        },\n        (err) => {\n          console.log(err);\n          seterrorBody(err);\n          seterror(true);\n        }\n      );\n    }\n  };\n\n  //To Stop displaying the popup after 3 sec\n  useEffect(() => {\n    if (error) {\n      setTimeout(() => {\n        seterror(false);\n      }, 3000);\n    }\n  }, [error]);\n  //To Stop displaying the popup after 3 sec\n  useEffect(() => {\n    if (success) {\n      setTimeout(() => {\n        setsuccess(false);\n      }, 3000);\n    }\n  }, [success]);\n\n  return (\n    <Fragment>\n      {success && sucessAlert()}\n      {error && errorAlert()}\n      <div className='card p-2 m-auto'>\n        <h4>Add a Transaction</h4>\n        <hr />\n        <select\n          className='form-control m-2'\n          name='type'\n          value={trans.type}\n          onChange={handleChange}>\n          <option value='INC'>Income</option>\n          <option value='EXP'>Expense</option>\n        </select>\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>Amount</label>\n          <div className='col-sm-10'>\n            <input\n              type='number'\n              className='form-control'\n              placeholder='ex. 50'\n              min='1'\n              max='100000'\n              name='amount'\n              value={trans.amount}\n              onChange={handleChange}\n            />\n          </div>\n        </div>\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>Category</label>\n          <div className='col-sm-10'>\n            <select\n              className='form-control'\n              name='category'\n              value={trans.category}\n              onChange={handleChange}>\n              {categories.map((cat, index) => {\n                return (\n                  <option key={index} value={index}>\n                    {cat.title}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n        </div>\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>Date</label>\n          <div className='col-sm-10'>\n            <input\n              type='date'\n              name='date'\n              value={trans.date}\n              onChange={handleChange}\n              className='form-control'\n            />\n          </div>\n        </div>\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>Description</label>\n          <div className='col-sm-10'>\n            <input\n              type='text'\n              className='form-control'\n              name='desc'\n              value={trans.desc}\n              onChange={handleChange}\n              placeholder='ex.KFC Bill'\n            />\n          </div>\n        </div>\n        <div className='row d-flex justify-content-center'>\n          <button className='btn btn-success' onClick={onsubmit}>\n            Add Transaction\n          </button>\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}