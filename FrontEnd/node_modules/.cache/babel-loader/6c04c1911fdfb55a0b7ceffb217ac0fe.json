{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\ACER\\\\OneDrive\\\\Desktop\\\\hw1\\\\Vasooli-Money-Manager-and-Accounting-Solution-React-Firebase\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\ACER\\\\OneDrive\\\\Desktop\\\\hw1\\\\Vasooli-Money-Manager-and-Accounting-Solution-React-Firebase\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\ACER\\\\OneDrive\\\\Desktop\\\\hw1\\\\Vasooli-Money-Manager-and-Accounting-Solution-React-Firebase\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import{imgArr}from\"./../data/userimages\";import fire from\"./../firebase/fire\";import{getUserData,updateUserData}from\"./../firebase/user\";import Spinner from\"react-bootstrap/Spinner\";export default function ProfileV(){var _useState=useState({email:\"\",fullName:\"\",profilePic:\"\",address:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setuser=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),intialdata=_useState4[0],setintialdata=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),uid=_useState6[0],setuid=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],seterror=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setsuccess=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),errorBody=_useState12[0],seterrorBody=_useState12[1];var handleChange=function handleChange(e){setuser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));//console.log(user);\n};var sucessAlert=function sucessAlert(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},\"Profile updated ! Loading will take time\");};var errorAlert=function errorAlert(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},errorBody.message?errorBody.message:\"Something Went Wrong Please Try Again !\");};var resetForm=function resetForm(){setuser(intialdata);};var updateData=function updateData(){fire.auth().currentUser.updateProfile({photoURL:user.profilePic});updateUserData(uid,user,function(){setsuccess(true);},function(err){seterrorBody(err);seterror(true);});};useEffect(function(){fire.auth().onAuthStateChanged(function(user){if(user){//console.log(user);\nsetuid(user.uid);getUserData(user.uid,function(data){setintialdata(data);setuser(data);},function(err){return seterror(err);});}else{//console.log(\"No Auth Changed\");\n}});},[]);//To Stop displaying the popup after 3 sec\nuseEffect(function(){if(error){setTimeout(function(){seterror(false);},3000);}},[error]);//To Stop displaying the popup after 3 sec\nuseEffect(function(){if(success){setTimeout(function(){setsuccess(false);},3000);}},[success]);return/*#__PURE__*/React.createElement(Fragment,null,success&&sucessAlert(),error&&errorAlert(),!user.email?/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",role:\"status\",style:{width:\"70px\",height:\"70px\",margin:\"auto\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"))):/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 d-flex flex-column\"},/*#__PURE__*/React.createElement(\"img\",{src:imgArr[parseInt(user.profilePic)],alt:\"Profile Picture of the User\",className:\"w-50 m-auto\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Selct the Profile Pic\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",value:user.profilePic,name:\"profilePic\",onChange:handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"Girl X\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"Girl Y\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3\"},\"Girl Z\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4\"},\"Boy D\"),/*#__PURE__*/React.createElement(\"option\",{value:\"5\"},\"Girl V\"),/*#__PURE__*/React.createElement(\"option\",{value:\"6\"},\"Boy E\"),/*#__PURE__*/React.createElement(\"option\",{value:\"7\"},\"Boy F\"),/*#__PURE__*/React.createElement(\"option\",{value:\"8\"},\"Boy J\"),/*#__PURE__*/React.createElement(\"option\",{value:\"9\"},\"Boy K\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Email\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",disabled:true,className:\"form-control-plaintext\",value:user.email}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Name \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",value:user.fullName,name:\"fullName\",onChange:handleChange,placeholder:\"John Doe\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Address \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",value:user.address,name:\"address\",onChange:handleChange,placeholder:\"780 Street John Doe house , Dist-Jalgaon,MH\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center justify-content-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger m-1\",onClick:resetForm},\"Reset\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success m-1\",onClick:updateData},\"Save Changes\"))));}","map":{"version":3,"sources":["C:/Users/ACER/OneDrive/Desktop/hw1/Vasooli-Money-Manager-and-Accounting-Solution-React-Firebase/src/pages/profile.page.jsx"],"names":["React","Fragment","useState","useEffect","imgArr","fire","getUserData","updateUserData","Spinner","ProfileV","email","fullName","profilePic","address","user","setuser","intialdata","setintialdata","uid","setuid","error","seterror","success","setsuccess","errorBody","seterrorBody","handleChange","e","target","name","value","sucessAlert","errorAlert","message","resetForm","updateData","auth","currentUser","updateProfile","photoURL","err","onAuthStateChanged","data","setTimeout","width","height","margin","parseInt"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport { imgArr } from \"./../data/userimages\";\nimport fire from \"./../firebase/fire\";\nimport { getUserData, updateUserData } from \"./../firebase/user\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\nexport default function ProfileV() {\n  const [user, setuser] = useState({\n    email: \"\",\n    fullName: \"\",\n    profilePic: \"\",\n    address: \"\",\n  });\n  const [intialdata, setintialdata] = useState({});\n  const [uid, setuid] = useState(\"\");\n  const [error, seterror] = useState(false);\n  const [success, setsuccess] = useState(false);\n  const [errorBody, seterrorBody] = useState({});\n\n  const handleChange = (e) => {\n    setuser({ ...user, [e.target.name]: e.target.value });\n    //console.log(user);\n  };\n\n  const sucessAlert = () => (\n    <div className='alert alert-success'>\n      Profile updated ! Loading will take time\n    </div>\n  );\n\n  const errorAlert = () => (\n    <div className='alert alert-danger'>\n      {errorBody.message\n        ? errorBody.message\n        : \"Something Went Wrong Please Try Again !\"}\n    </div>\n  );\n\n  const resetForm = () => {\n    setuser(intialdata);\n  };\n\n  const updateData = () => {\n    fire.auth().currentUser.updateProfile({\n      photoURL: user.profilePic,\n    });\n\n    updateUserData(\n      uid,\n      user,\n      () => {\n        setsuccess(true);\n      },\n      (err) => {\n        seterrorBody(err);\n        seterror(true);\n      }\n    );\n  };\n\n  useEffect(() => {\n    fire.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        //console.log(user);\n        setuid(user.uid);\n        getUserData(\n          user.uid,\n          (data) => {\n            setintialdata(data);\n            setuser(data);\n          },\n          (err) => seterror(err)\n        );\n      } else {\n        //console.log(\"No Auth Changed\");\n      }\n    });\n  }, []);\n  //To Stop displaying the popup after 3 sec\n  useEffect(() => {\n    if (error) {\n      setTimeout(() => {\n        seterror(false);\n      }, 3000);\n    }\n  }, [error]);\n  //To Stop displaying the popup after 3 sec\n  useEffect(() => {\n    if (success) {\n      setTimeout(() => {\n        setsuccess(false);\n      }, 3000);\n    }\n  }, [success]);\n\n  return (\n    <Fragment>\n      {success && sucessAlert()}\n      {error && errorAlert()}\n      {!user.email ? (\n        <div className='w-100 d-flex justify-content-center'>\n          <Spinner\n            animation='border'\n            role='status'\n            style={{ width: \"70px\", height: \"70px\", margin: \"auto\" }}>\n            <span className='sr-only'>Loading...</span>\n          </Spinner>\n        </div>\n      ) : (\n        <Fragment>\n          <div className='row p-2'>\n            {/* Profile pic Section */}\n            <div className='col-md-4 d-flex flex-column'>\n              <img\n                src={imgArr[parseInt(user.profilePic)]}\n                alt='Profile Picture of the User'\n                className='w-50 m-auto'\n              />\n              <div className='form-group'>\n                <label>Selct the Profile Pic</label>\n                <select\n                  className='form-control'\n                  value={user.profilePic}\n                  name='profilePic'\n                  onChange={handleChange}>\n                  <option value='1'>Girl X</option>\n                  <option value='2'>Girl Y</option>\n                  <option value='3'>Girl Z</option>\n                  <option value='4'>Boy D</option>\n                  <option value='5'>Girl V</option>\n                  <option value='6'>Boy E</option>\n                  <option value='7'>Boy F</option>\n                  <option value='8'>Boy J</option>\n                  <option value='9'>Boy K</option>\n                </select>\n              </div>\n            </div>\n            {/* Card Details Section */}\n            <div className='col-md-7'>\n              <div className='form-group row'>\n                <label className='col-sm-2 col-form-label'>Email</label>\n                <div className='col-sm-10'>\n                  <input\n                    type='email'\n                    disabled\n                    className='form-control-plaintext'\n                    value={user.email}\n                  />\n                </div>\n              </div>\n              <div className='form-group row'>\n                <label className='col-sm-2 col-form-label'>Name </label>\n                <div className='col-sm-10'>\n                  <input\n                    type='text'\n                    className='form-control'\n                    value={user.fullName}\n                    name='fullName'\n                    onChange={handleChange}\n                    placeholder='John Doe'\n                  />\n                </div>\n              </div>\n              <div className='form-group row'>\n                <label className='col-sm-2 col-form-label'>Address </label>\n                <div className='col-sm-10'>\n                  <input\n                    type='text'\n                    className='form-control'\n                    value={user.address}\n                    name='address'\n                    onChange={handleChange}\n                    placeholder='780 Street John Doe house , Dist-Jalgaon,MH'\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className='row text-center justify-content-center'>\n            <button className='btn btn-danger m-1' onClick={resetForm}>\n              Reset\n            </button>\n            <button className='btn btn-success m-1' onClick={updateData}>\n              Save Changes\n            </button>\n          </div>\n        </Fragment>\n      )}\n    </Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}