{"ast":null,"code":"import _defineProperty from\"S:\\\\PaisaAayo\\\\PaisaAayo\\\\FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"S:\\\\PaisaAayo\\\\PaisaAayo\\\\FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"S:\\\\PaisaAayo\\\\PaisaAayo\\\\FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,Fragment}from\"react\";import categories from\"./../../data/categories\";import fire from\"./../../firebase/fire\";import{getUserList}from\"./../../firebase/user\";import{addVasooli}from\"./../../firebase/vasooli\";export default function Addvasooli(){var _useState=useState({to:\"\",amount:0,category:0,date:new Date(),desc:\"\",status:\"WAITING\"}),_useState2=_slicedToArray(_useState,2),vasooli=_useState2[0],setvasooli=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setuser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userlist=_useState6[0],setuserlist=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setsuccess=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],seterror=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),errorBody=_useState12[0],seterrorBody=_useState12[1];var onsubmit=function onsubmit(){var user=fire.auth().currentUser;if(vasooli.amount<=0){seterror(true);seterrorBody({message:\"Amount Cannot be Negative or Zero\"});}else if(vasooli.to===\"\"){seterror(true);seterrorBody({message:\"You Need to Select the User to ASK money\"});}else{addVasooli(user.email,vasooli,function(res){console.log(res);setsuccess(true);setvasooli({to:\"\",amount:0,category:1,date:new Date(),desc:\"\",status:\"WAITING\"});},function(err){console.log(err);seterrorBody(err);seterror(true);});}};var handleChange=function handleChange(e){setvasooli(_objectSpread(_objectSpread({},vasooli),{},_defineProperty({},e.target.name,e.target.value)));//console.log(user);\n};var sucessAlert=function sucessAlert(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},\"Debt Asked Successfully !\");};var errorAlert=function errorAlert(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},errorBody.message?errorBody.message:\"Something Went Wrong Please Try Again !\");};var getuser=function getuser(){var user=fire.auth().currentUser;setuser(user);return/*#__PURE__*/React.createElement(\"h1\",null,\"Jusr Demo\");};//To Stop displaying the popup after 3 sec\nuseEffect(function(){if(error){setTimeout(function(){seterror(false);},3000);}},[error]);//To Stop displaying the popup after 3 sec\nuseEffect(function(){if(success){setTimeout(function(){setsuccess(false);},3000);}},[success]);useEffect(function(){//console.log(\"useEffctc\");\nfire.auth().onAuthStateChanged(function(user){if(user){setuser(user);getUserList(function(res){//console.log(res);\nsetuserlist(res.filter(function(it){return it!==user.email;}));},function(err){seterror(true);seterrorBody(err);console.log(err);});}else{}});},[]);return/*#__PURE__*/React.createElement(Fragment,null,success&&sucessAlert(),error&&errorAlert(),/*#__PURE__*/React.createElement(\"div\",{className:\"card p-2 m-auto\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Request your Money\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"ex. 50\",min:\"1\",max:\"100000\",name:\"amount\",value:vasooli.amount,onChange:handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"To \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",name:\"to\",value:vasooli.to,onChange:handleChange},userlist//.filter((itr) => itr !== user.email)\n.map(function(usr,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:usr},usr);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Category \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",name:\"category\",value:vasooli.category,onChange:handleChange},categories.map(function(cat,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:index},cat.title);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 col-form-label\"},\"Description\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"desc\",value:vasooli.desc,onChange:handleChange,placeholder:\"ex. Meal at Gangotri Bill\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:onsubmit},\"Ask for Debt Clearance\"))));}","map":{"version":3,"sources":["S:/PaisaAayo/PaisaAayo/FrontEnd/src/components/vasooli/addvasooli.jsx"],"names":["React","useEffect","useState","Fragment","categories","fire","getUserList","addVasooli","Addvasooli","to","amount","category","date","Date","desc","status","vasooli","setvasooli","user","setuser","userlist","setuserlist","success","setsuccess","error","seterror","errorBody","seterrorBody","onsubmit","auth","currentUser","message","email","res","console","log","err","handleChange","e","target","name","value","sucessAlert","errorAlert","getuser","setTimeout","onAuthStateChanged","filter","it","map","usr","index","cat","title"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Fragment } from \"react\";\nimport categories from \"./../../data/categories\";\n\nimport fire from \"./../../firebase/fire\";\nimport { getUserList } from \"./../../firebase/user\";\nimport { addVasooli } from \"./../../firebase/vasooli\";\n\nexport default function Addvasooli() {\n  const [vasooli, setvasooli] = useState({\n    to: \"\",\n    amount: 0,\n    category: 0,\n    date: new Date(),\n    desc: \"\",\n    status: \"WAITING\",\n  });\n  const [user, setuser] = useState({});\n  const [userlist, setuserlist] = useState([]);\n  const [success, setsuccess] = useState(false);\n  const [error, seterror] = useState(false);\n  const [errorBody, seterrorBody] = useState({});\n\n  const onsubmit = () => {\n    let user = fire.auth().currentUser;\n    if (vasooli.amount <= 0) {\n      seterror(true);\n      seterrorBody({ message: \"Amount Cannot be Negative or Zero\" });\n    } else if (vasooli.to === \"\") {\n      seterror(true);\n      seterrorBody({ message: \"You Need to Select the User to ASK money\" });\n    } else {\n      addVasooli(\n        user.email,\n        vasooli,\n        (res) => {\n          console.log(res);\n          setsuccess(true);\n          setvasooli({\n            to: \"\",\n            amount: 0,\n            category: 1,\n            date: new Date(),\n            desc: \"\",\n            status: \"WAITING\",\n          });\n        },\n        (err) => {\n          console.log(err);\n          seterrorBody(err);\n          seterror(true);\n        }\n      );\n    }\n  };\n\n  const handleChange = (e) => {\n    setvasooli({ ...vasooli, [e.target.name]: e.target.value });\n    //console.log(user);\n  };\n  const sucessAlert = () => (\n    <div className='alert alert-success'>Debt Asked Successfully !</div>\n  );\n\n  const errorAlert = () => (\n    <div className='alert alert-danger'>\n      {errorBody.message\n        ? errorBody.message\n        : \"Something Went Wrong Please Try Again !\"}\n    </div>\n  );\n\n  const getuser = () => {\n    let user = fire.auth().currentUser;\n    setuser(user);\n    return <h1>Jusr Demo</h1>;\n  };\n\n  //To Stop displaying the popup after 3 sec\n  useEffect(() => {\n    if (error) {\n      setTimeout(() => {\n        seterror(false);\n      }, 3000);\n    }\n  }, [error]);\n  //To Stop displaying the popup after 3 sec\n  useEffect(() => {\n    if (success) {\n      setTimeout(() => {\n        setsuccess(false);\n      }, 3000);\n    }\n  }, [success]);\n\n  useEffect(() => {\n    //console.log(\"useEffctc\");\n    fire.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        setuser(user);\n        getUserList(\n          (res) => {\n            //console.log(res);\n            setuserlist(res.filter((it) => it !== user.email));\n          },\n          (err) => {\n            seterror(true);\n            seterrorBody(err);\n            console.log(err);\n          }\n        );\n      } else {\n      }\n    });\n  }, []);\n  return (\n    <Fragment>\n      {success && sucessAlert()}\n      {error && errorAlert()}\n      <div className='card p-2 m-auto'>\n        <h4>Request your Money</h4>\n        <hr />\n\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>Amount</label>\n          <div className='col-sm-10'>\n            <input\n              type='number'\n              className='form-control'\n              placeholder='ex. 50'\n              min='1'\n              max='100000'\n              name='amount'\n              value={vasooli.amount}\n              onChange={handleChange}\n            />\n          </div>\n        </div>\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>To </label>\n          <div className='col-sm-10'>\n            <select\n              className='form-control'\n              name='to'\n              value={vasooli.to}\n              onChange={handleChange}>\n              {userlist\n                //.filter((itr) => itr !== user.email)\n                .map((usr, index) => (\n                  <option key={index} value={usr}>\n                    {usr}\n                  </option>\n                ))}\n            </select>\n          </div>\n        </div>\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>Category </label>\n          <div className='col-sm-10'>\n            <select\n              className='form-control'\n              name='category'\n              value={vasooli.category}\n              onChange={handleChange}>\n              {categories.map((cat, index) => (\n                <option key={index} value={index}>\n                  {cat.title}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n        <div className='form-group row'>\n          <label className='col-sm-2 col-form-label'>Description</label>\n          <div className='col-sm-10'>\n            <input\n              type='text'\n              className='form-control'\n              name='desc'\n              value={vasooli.desc}\n              onChange={handleChange}\n              placeholder='ex. Meal at Gangotri Bill'\n            />\n          </div>\n        </div>\n        <div className='row d-flex justify-content-center'>\n          <button className='btn btn-success' onClick={onsubmit}>\n            Ask for Debt Clearance\n          </button>\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}