{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ACER\\\\OneDrive\\\\Desktop\\\\hw1\\\\Vasooli-Money-Manager-and-Accounting-Solution-React-Firebase\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import{getTransactionByFilter}from\"./../firebase/transaction\";import fire from\"./../firebase/fire\";import{useLocation}from\"react-router-dom\";import categories from\"./../data/categories\";import{PieChart,Pie,Legend,Tooltip}from\"recharts\";import{BarChart,Bar,Cell,XAxis,YAxis,CartesianGrid}from\"recharts\";import loadingImg from\"./../assets/img/dashboard-loading.gif\";import Empty from\"./../components/general/empty.component\";import\"./dashboard.style.css\";export default function DashboardV(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),TransactionsArr=_useState2[0],setTransactionsArr=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),IncomePieData=_useState4[0],setIncomePieData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),ExpensePieData=_useState6[0],seExpensePieData=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),netIncome=_useState8[0],setnetIncome=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),netExpense=_useState10[0],setnetExpense=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),monthdata=_useState12[0],setmonthdata=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),categorywise=_useState14[0],setcategorywise=_useState14[1];var _useState15=useState({width:0,height:0}),_useState16=_slicedToArray(_useState15,2),PieDim=_useState16[0],setPieDim=_useState16[1];var _useState17=useState({width:0,height:0}),_useState18=_slicedToArray(_useState17,2),BarDim=_useState18[0],setBarDim=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),loading=_useState20[0],setloading=_useState20[1];var _useState21=useState({}),_useState22=_slicedToArray(_useState21,2),user=_useState22[0],setuser=_useState22[1];var loc=useLocation();var BarDataMaking=function BarDataMaking(TransactionsArr){var inc=[0,0,0,0,0,0];var exp=[0,0,0,0,0,0];var monthArr=[\"Jan-Feb\",\"Mar-Apr\",\"May-Jun\",\"Jul-Aug\",\"Sep-Oct\",\"Nov-Dec\"];TransactionsArr.map(function(trans){if(trans.type===\"INC\"){var dt=new Date(trans.date);var month=dt.getMonth();inc[parseInt(month/2)]+=parseInt(trans.amount);}else if(trans.type===\"EXP\"){var _dt=new Date(trans.date);var _month=_dt.getMonth();exp[parseInt(_month/2)]+=parseInt(trans.amount);}});//    console.log(inc, exp);\nvar bardata=[];for(var i in inc){bardata.push({Months:monthArr[i],Income:inc[i],Expense:exp[i]});}setmonthdata(bardata);};var PieDataMaking=function PieDataMaking(TransactionsArr){var inc=[0,0,0],exp=[0,0,0,0,0,0,0,0,0,0,0];//console.log(TransactionsArr);\nTransactionsArr.map(function(trans){if(trans.type===\"INC\"){var catIndex=parseInt(trans.category);inc[catIndex]+=parseInt(trans.amount);}else if(trans.type===\"EXP\"){var _catIndex=parseInt(trans.category)-3;exp[_catIndex]+=parseInt(trans.amount);}});//console.log(inc, exp);\nvar incObjArr=[],expObjArr=[],incSum=0,expSum=0;inc.map(function(d,index){var obj={name:categories[index].title,value:d};incSum+=d;//console.log(obj);\nincObjArr.push(obj);});exp.map(function(d,index){expObjArr.push({name:categories[index+3].title,value:d});expSum+=d;});//console.log(incObjArr, expObjArr);\nsetIncomePieData(incObjArr);seExpensePieData(expObjArr);setnetIncome(incSum);setnetExpense(expSum);setcategorywise(inc.concat(exp));};useEffect(function(){setloading(true);if(window.innerWidth>800){//Desktop\nsetPieDim({width:window.innerWidth/4,height:window.innerHeight/2});setBarDim({width:window.innerWidth*0.7,height:window.innerHeight*0.4});}else{setPieDim({width:window.innerWidth*0.8,height:window.innerHeight/2});setBarDim({width:window.innerWidth*0.98,height:window.innerHeight*0.3});}fire.auth().onAuthStateChanged(function(user){if(user){setuser(user);getTransactionByFilter(user.uid,\"ALL\",function(res){var Arr=[];res.forEach(function(item){Arr.push(item.data());});//            console.log(Arr);\nsetTransactionsArr(Arr);PieDataMaking(Arr);BarDataMaking(Arr);setloading(false);},function(err){return console.log(err);});}else{//console.log(\"NO user AUth Change\");\n}});},[loc.pathname]);return/*#__PURE__*/React.createElement(Fragment,null,loading?/*#__PURE__*/React.createElement(\"img\",{src:loadingImg,className:\"w-100 m-auto\"}):/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 card alert-success\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Net Income : \",netIncome)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 card alert-danger\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Net Expenses : \",netExpense))),TransactionsArr.length===0?/*#__PURE__*/React.createElement(Empty,null):/*#__PURE__*/React.createElement(\"div\",{className:\"row p-2 d-flex flex-col justify-content-center\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Monthwise Income and Expenses\"),/*#__PURE__*/React.createElement(BarChart,{width:BarDim.width,height:BarDim.height,data:monthdata,margin:{top:5,right:30,left:20,bottom:5}},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{dataKey:\"Months\"}),/*#__PURE__*/React.createElement(YAxis,null),/*#__PURE__*/React.createElement(Tooltip,null),/*#__PURE__*/React.createElement(Legend,null),/*#__PURE__*/React.createElement(Bar,{dataKey:\"Income\",fill:\"\\t#5cb85c\"}),/*#__PURE__*/React.createElement(Bar,{dataKey:\"Expense\",fill:\"#d9534f\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 card p-2\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"\"},\"Category Wise Spends\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group\"},categories.map(function(cat,i){return/*#__PURE__*/React.createElement(\"li\",{key:i,className:\"list-group-item d-flex flex-row p-1\"},/*#__PURE__*/React.createElement(\"i\",{className:\"\".concat(cat.iconclass,\" mx-2\"),style:{fontSize:\"25px\"}}),/*#__PURE__*/React.createElement(\"h6\",{className:\"para-width\"},cat.title,\" - \"),/*#__PURE__*/React.createElement(\"div\",{className:\"badge-width badge justify-selff-end p-2 badge-\".concat(i>3?\"danger\":\"success\")},\"$\",categorywise[i]));}))),TransactionsArr.length!==0?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 card p-2\"},/*#__PURE__*/React.createElement(PieChart,{width:PieDim.width+20,height:PieDim.height+20},/*#__PURE__*/React.createElement(Pie,{data:IncomePieData,dataKey:\"value\",cx:PieDim.width/2,cy:PieDim.height/2,outerRadius:75,fill:\"\\t#5cb85c\"}),/*#__PURE__*/React.createElement(Pie,{data:ExpensePieData,dataKey:\"value\",cx:PieDim.width/2,cy:PieDim.height/2,innerRadius:95,outerRadius:120,fill:\"#d9534f\",label:true}),/*#__PURE__*/React.createElement(Tooltip,null))):\"\")));}","map":{"version":3,"sources":["C:/Users/ACER/OneDrive/Desktop/hw1/Vasooli-Money-Manager-and-Accounting-Solution-React-Firebase/src/pages/dashboard.page.jsx"],"names":["React","Fragment","useState","useEffect","getTransactionByFilter","fire","useLocation","categories","PieChart","Pie","Legend","Tooltip","BarChart","Bar","Cell","XAxis","YAxis","CartesianGrid","loadingImg","Empty","DashboardV","TransactionsArr","setTransactionsArr","IncomePieData","setIncomePieData","ExpensePieData","seExpensePieData","netIncome","setnetIncome","netExpense","setnetExpense","monthdata","setmonthdata","categorywise","setcategorywise","width","height","PieDim","setPieDim","BarDim","setBarDim","loading","setloading","user","setuser","loc","BarDataMaking","inc","exp","monthArr","map","trans","type","dt","Date","date","month","getMonth","parseInt","amount","bardata","i","push","Months","Income","Expense","PieDataMaking","catIndex","category","incObjArr","expObjArr","incSum","expSum","d","index","obj","name","title","value","concat","window","innerWidth","innerHeight","auth","onAuthStateChanged","uid","res","Arr","forEach","item","data","err","console","log","pathname","length","top","right","left","bottom","cat","iconclass","fontSize"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport { getTransactionByFilter } from \"./../firebase/transaction\";\nimport fire from \"./../firebase/fire\";\nimport { useLocation } from \"react-router-dom\";\nimport categories from \"./../data/categories\";\nimport { PieChart, Pie, Legend, Tooltip } from \"recharts\";\nimport { BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid } from \"recharts\";\nimport loadingImg from \"./../assets/img/dashboard-loading.gif\";\nimport Empty from \"./../components/general/empty.component\";\nimport \"./dashboard.style.css\";\nexport default function DashboardV() {\n  const [TransactionsArr, setTransactionsArr] = useState([]);\n  const [IncomePieData, setIncomePieData] = useState([]);\n  const [ExpensePieData, seExpensePieData] = useState([]);\n  const [netIncome, setnetIncome] = useState(0);\n  const [netExpense, setnetExpense] = useState(0);\n  const [monthdata, setmonthdata] = useState([]);\n  const [categorywise, setcategorywise] = useState([]);\n  const [PieDim, setPieDim] = useState({\n    width: 0,\n    height: 0,\n  });\n  const [BarDim, setBarDim] = useState({\n    width: 0,\n    height: 0,\n  });\n  const [loading, setloading] = useState(true);\n  const [user, setuser] = useState({});\n  let loc = useLocation();\n\n  const BarDataMaking = (TransactionsArr) => {\n    let inc = [0, 0, 0, 0, 0, 0];\n    let exp = [0, 0, 0, 0, 0, 0];\n    const monthArr = [\n      \"Jan-Feb\",\n      \"Mar-Apr\",\n      \"May-Jun\",\n      \"Jul-Aug\",\n      \"Sep-Oct\",\n      \"Nov-Dec\",\n    ];\n    TransactionsArr.map((trans) => {\n      if (trans.type === \"INC\") {\n        let dt = new Date(trans.date);\n        let month = dt.getMonth();\n        inc[parseInt(month / 2)] += parseInt(trans.amount);\n      } else if (trans.type === \"EXP\") {\n        let dt = new Date(trans.date);\n        let month = dt.getMonth();\n        exp[parseInt(month / 2)] += parseInt(trans.amount);\n      }\n    });\n    //    console.log(inc, exp);\n    let bardata = [];\n    for (let i in inc) {\n      bardata.push({\n        Months: monthArr[i],\n        Income: inc[i],\n        Expense: exp[i],\n      });\n    }\n    setmonthdata(bardata);\n  };\n\n  const PieDataMaking = (TransactionsArr) => {\n    let inc = [0, 0, 0],\n      exp = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    //console.log(TransactionsArr);\n    TransactionsArr.map((trans) => {\n      if (trans.type === \"INC\") {\n        let catIndex = parseInt(trans.category);\n        inc[catIndex] += parseInt(trans.amount);\n      } else if (trans.type === \"EXP\") {\n        let catIndex = parseInt(trans.category) - 3;\n        exp[catIndex] += parseInt(trans.amount);\n      }\n    });\n    //console.log(inc, exp);\n    let incObjArr = [],\n      expObjArr = [],\n      incSum = 0,\n      expSum = 0;\n    inc.map((d, index) => {\n      let obj = {\n        name: categories[index].title,\n        value: d,\n      };\n      incSum += d;\n      //console.log(obj);\n      incObjArr.push(obj);\n    });\n    exp.map((d, index) => {\n      expObjArr.push({\n        name: categories[index + 3].title,\n        value: d,\n      });\n      expSum += d;\n    });\n    //console.log(incObjArr, expObjArr);\n    setIncomePieData(incObjArr);\n    seExpensePieData(expObjArr);\n    setnetIncome(incSum);\n    setnetExpense(expSum);\n    setcategorywise(inc.concat(exp));\n  };\n\n  useEffect(() => {\n    setloading(true);\n    if (window.innerWidth > 800) {\n      //Desktop\n      setPieDim({\n        width: window.innerWidth / 4,\n        height: window.innerHeight / 2,\n      });\n      setBarDim({\n        width: window.innerWidth * 0.7,\n        height: window.innerHeight * 0.4,\n      });\n    } else {\n      setPieDim({\n        width: window.innerWidth * 0.8,\n        height: window.innerHeight / 2,\n      });\n      setBarDim({\n        width: window.innerWidth * 0.98,\n        height: window.innerHeight * 0.3,\n      });\n    }\n    fire.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        setuser(user);\n        getTransactionByFilter(\n          user.uid,\n          \"ALL\",\n          (res) => {\n            let Arr = [];\n            res.forEach((item) => {\n              Arr.push(item.data());\n            });\n            //            console.log(Arr);\n\n            setTransactionsArr(Arr);\n            PieDataMaking(Arr);\n            BarDataMaking(Arr);\n            setloading(false);\n          },\n          (err) => console.log(err)\n        );\n      } else {\n        //console.log(\"NO user AUth Change\");\n      }\n    });\n  }, [loc.pathname]);\n  return (\n    <Fragment>\n      {loading ? (\n        <img src={loadingImg} className='w-100 m-auto' />\n      ) : (\n        <Fragment>\n          <div className='row'>\n            <div className='col-6 card alert-success'>\n              <h5>Net Income : {netIncome}</h5>\n            </div>\n            <div className='col-6 card alert-danger'>\n              <h5>Net Expenses : {netExpense}</h5>\n            </div>\n          </div>\n          {TransactionsArr.length === 0 ? (\n            <Empty />\n          ) : (\n            <div className='row p-2 d-flex flex-col justify-content-center'>\n              <h5>Monthwise Income and Expenses</h5>\n              <BarChart\n                width={BarDim.width}\n                height={BarDim.height}\n                data={monthdata}\n                margin={{\n                  top: 5,\n                  right: 30,\n                  left: 20,\n                  bottom: 5,\n                }}>\n                <CartesianGrid strokeDasharray='3 3' />\n                <XAxis dataKey='Months' />\n                <YAxis />\n                <Tooltip />\n                <Legend />\n                <Bar dataKey='Income' fill='\t#5cb85c' />\n                <Bar dataKey='Expense' fill='#d9534f' />\n              </BarChart>\n            </div>\n          )}\n          <div className='row'>\n            <div className='col-md-6 card p-2'>\n              <h5 className=''>Category Wise Spends</h5>\n              <ul className='list-group'>\n                {categories.map((cat, i) => (\n                  <li key={i} className='list-group-item d-flex flex-row p-1'>\n                    <i\n                      className={`${cat.iconclass} mx-2`}\n                      style={{ fontSize: \"25px\" }}></i>\n\n                    <h6 className='para-width'>{cat.title} - </h6>\n                    <div\n                      className={`badge-width badge justify-selff-end p-2 badge-${\n                        i > 3 ? \"danger\" : \"success\"\n                      }`}>\n                      ${categorywise[i]}\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </div>\n            {TransactionsArr.length !== 0 ? (\n              <div className='col-md-6 card p-2'>\n                <PieChart width={PieDim.width + 20} height={PieDim.height + 20}>\n                  <Pie\n                    data={IncomePieData}\n                    dataKey='value'\n                    cx={PieDim.width / 2}\n                    cy={PieDim.height / 2}\n                    outerRadius={75}\n                    fill='\t#5cb85c'\n                  />\n                  <Pie\n                    data={ExpensePieData}\n                    dataKey='value'\n                    cx={PieDim.width / 2}\n                    cy={PieDim.height / 2}\n                    innerRadius={95}\n                    outerRadius={120}\n                    fill='#d9534f'\n                    label\n                  />\n                  <Tooltip />\n                </PieChart>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </Fragment>\n      )}\n    </Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}